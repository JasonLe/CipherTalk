# 群聊分析页面 AI 分析功能实施计划

## 实现方案概述

参考聊天查看页面（ChatPage）的AI摘要功能，在群聊分析页面（GroupAnalyticsPage）添加AI分析按钮，点击后打开独立窗口进行群聊AI分析。

## 实施步骤

### 1. 在 GroupAnalyticsPage 添加 AI 分析按钮
- 在 `renderFunctionMenu()` 函数中的功能卡片区域上方添加 "AI 群聊分析" 按钮
- 按钮位于群聊头像和信息下方
- 点击后调用新的 API 打开群聊 AI 分析窗口

### 2. 在主进程中添加群聊 AI 分析窗口创建函数
- **文件**: `electron/main.ts`
- **新增**: `createGroupAIAnalysisWindow(groupId, groupName)` 函数
- 类似现有的 `createAISummaryWindow` 函数
- 窗口大小和配置可以复用相同设置

### 3. 添加新的 IPC API
- **文件**: `electron/preload.ts`
- **新增**: `openGroupAIAnalysisWindow(groupId, groupName)` API

- **文件**: `src/types/electron.d.ts`
- **新增**: 对应的 TypeScript 类型定义

- **文件**: `electron/main.ts`
- **新增**: `window:openGroupAIAnalysisWindow` 处理器

### 4. 复用 AISummaryWindow 组件
- AISummaryWindow 组件已经支持从 URL 参数接收会话信息
- 群聊分析时传入 `sessionId` 为群聊 ID
- 后端 `aiService.ts` 的 `generateSummary` 已经支持查询群聊消息（通过 `getGroupMessages`）

### 5. 按钮样式和交互
- 按钮样式参考 ChatPage 的 AI 摘要按钮（Sparkles 图标）
- 位于功能菜单顶部，与现有功能卡片区分开

## 涉及的文件修改

1. `src/pages/GroupAnalyticsPage.tsx` - 添加 AI 分析按钮和点击处理
2. `electron/main.ts` - 添加窗口创建函数和 IPC 处理器
3. `electron/preload.ts` - 添加 preload API
4. `src/types/electron.d.ts` - 添加 TypeScript 类型定义

## 功能特点

- 复用现有的 AI 摘要生成能力
- 支持选择时间范围（1天、7天、30天等）
- 保存分析历史记录
- 支持导出和复制分析结果